<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="salon.dao.ShopDao">
  
  <!-- 	
  	<resultMap id="shopMap" type="Shop">
  		<id property="no" column="no" />
  		<collection property="ShopImageList" ofType="ShopImage">
  			<id property="fileNo" column="file_no"/>
  			<result property="fileName" column="file_name"/>
  		</collection>
	</resultMap> 
   -->
	
	<!-- 셀렉문 -->
  	<select id="selectShopList" resultType="shop">
  		select *
  			from shop;
  	</select>
  	
  	<select id="selectShopImageList" resultType="shopImage">
  		select file_name as fileName, file_no as fileNo, shop_no as no
  		  from shopImage
  	</select>
  	
  	<select id="selectDesignerList" resultType="designer">
  		select member.name, dsn.no
  		  from member inner join dsn
     	    on member.no = dsn.no
 		 order by dsn.no;
  	</select>
  	<!-- 인서트문 -->
  	<insert id="insertImage" parameterType="shopImage">
  		insert into shopImage(file_name, shop_no)
  		values (#{fileName}, #{no})
  	</insert>

  	
  	<!-- shop information -->
  	<select id="getShop" parameterType="string" resultType="shop">
  		select name, sano
  		  from shop
  		 where name like CONCAT('%', #{name}, '%')
  	</select>
  	

  </mapper>