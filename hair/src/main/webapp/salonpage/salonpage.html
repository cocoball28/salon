<!DOCTYPE html>
<html lang="en">
<head>
<title>미용실페이지</title>
<meta charset="UTF-8">
<meta name=description content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap, CSS -->
<link rel="stylesheet"
	href="http://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link href="salon/css/salon.css" rel="stylesheet" media="screen" />
<link href='https://fonts.googleapis.com/css?family=Syncopate'
	rel='stylesheet' type='text/css'>
</head>
<body>
	<div class="wrap wrap-index">
		<!-- 슬라이더 부분 -->
		<div class="slider">
			<div class="jquery-reslider">
				<div class="slider-block" id="s1" data-url="./salon/images/salon3.jpg"></div>
				<div class="slider-block" id="s2" data-url="./salon/images/salon4.jpg"></div>
				<div class="slider-block" id="s3" data-url="./salon/images/salon5.jpg"></div>
				<div class="slider-block" id="s4" data-url="./salon/images/salon6.jpg"></div>
				<div class="pop">
				<a href="#login_form" id="amb">Info</a>
				<button class="mb">Reserve</button>
				<button class="mb">Bookmark</button>
				<button class="ebtn" id="mb">Edit</button>
				<a href="#x" class="overlay" id="login_form"></a>
        			<div class="popup">
            			<h2>Juno Hair</h2>
            			<p>서울시 강남구 강남대로 11-1</p>
            				<div>
                				<label for="login">Tel</label>
                				<label id="login" >02-712-5845</label>
            				</div>
            			<a class="close" href="#close"></a>
        			</div>
				<!-- 슬라이드 구분버튼 (빼는게 이쁜거 같음)
				<div class="slider-dots">
					<ul>

					</ul>
				</div>
				-->
			</div>
		</div>
		<!-- end build-->
	</div>
	</div>
	<!-- 디자이너부분 -->
	<div id="big">
		<div id="dsnpic1" class="pic">
			<div class="blog1">
				<div class="bp">
					<a href="http://192.168.0.44:8008/hair/blog/blog.html"><img src="./salon/images/blog.png"></a>
				</div>
				<div class="name"></div>
				<div class="move">
					<a href="http://192.168.0.44:8008/hair/blog/blog.html" class="blogm">블로그이동</a>
				</div>
			</div>
			<div class="slide1"></div>
		</div>
		<div id="dsnpic2" class="pic">
			<div class="blog1">
				<div class="bp">
					<a href="#"><img src="./salon/images/blog.png"></a>
				</div>
				<div class="name"></div>
				<div class="move">
					<a href="#" class="blogm">블로그이동</a>
				</div>
			</div>
			<div class="slide2"></div>
		</div>
		<div id="dsnpic3" class="pic">
			<div class="blog1">
				<div class="bp">
					<a href="#"><img src="./salon/images/blog.png"></a>
				</div>
				<div class="name"></div>
				<div class="move">
					<a href="#" class="blogm">블로그이동</a>
				</div>
			</div>
			<div class="slide3"></div>
		</div>
		<div id="dsnpic4" class="pic">
			<div class="blog1">
				<div class="bp">
					<a href="#"><img src="./salon/images/blog.png"></a>
				</div>
				<div class="name"></div>
				<div class="move">
					<a href="#" class="blogm">블로그이동</a>
				</div>
			</div>
			<div class="slide4"></div>
		</div>
		<div id="dsnpic5" class="pic">
			<div class="blog1">
				<div class="bp">
					<a href="#"><img src="./salon/images/blog.png"></a>
				</div>
				<div class="name"></div>
				<div class="move">
					<a href="#" class="blogm">블로그이동</a>
				</div>
			</div>
			<div class="slide5"></div>
		</div>
	</div>	
	<!-- 편집창 -->
	<div class="ebox">
		<form name="upload1" class="registForm">
		<div class="esp">
		<div class="fb">
	    <input type="file" name="file1" class="f1" onchange="readURL1(this);">
	    </div>
		</div>
		<div class="esp">
		<div class="fb">
	    <input type="file" name="file2" class="f2" onchange="readURL2(this);">
	    </div>
		</div>
		<div class="esp">
		<div class="fb">
	    <input type="file" name="file3" class="f3" onchange="readURL3(this);">
	    </div>
		</div>
		<div class="esp">
		<div class="fb">
	    <input type="file" name="file4" class="f4" onchange="readURL4(this);">
	    </div>
		</div>
		<button  onclick="registShop()">저장</button>
		<button class="x">X</button>
		
		</form>
	</div>
	<!-- 미리보기 -->
	
	<div class="picbox">
	<div class="bepic">
		<img class="blah1" src="#"/>
	</div>
	<div class="bepic">
		<img class="blah2" src="#"/>
	</div>
	<div class="bepic">
		<img class="blah3" src="#"/>
	</div>
	<div class="bepic">
		<img class="blah4" src="#"/>
	</div>
	</div>
	<!-- 화면끝 -->
	
<!-- jQuery -->
<script src="./salon/js/jquery-2.2.0.js"></script>
<script src="./salon/js/commonjs.js"></script>
<!-- Client JavaScript -->
<script src="salon/js/jquery.reslider.js"></script>
<script>
	// 슬라이드 스크립트
	$(function() {
		$('.jquery-reslider').reSlider({
			speed : 1000, //페이드속도
			delay : 5000, //자동전환 속도
			imgCount : 4, //이미지갯수
			dots : true, //하단 페이지 버튼
			autoPlay : true //자동재생
		})
	})
	
	// JSON 데이터 가져오기
	$(function() {
		$.getJSON(contextPath+"/shop/list.do", 
			function(data){
				for (var i = 0; i < 5; i++) {
					$("#dsnpic" + (i+1)).find(".name").text(data.shopList[i].name);
					$("#dsnpic" + (i+1)).css("background-image", "url('salon/images/dsn1" + data.shopList[i].no + ".jpg')")
				}
		});
	})
	// edit 버튼 전환
	  $(function() {
		$(".ebtn").click(function() {
			$(".slider").css("opacity", "0.3");
			$(".slider").css("transition", "0.5s");
			$("#big").css("opacity", "0.3");
			$("#big").css("transition", "0.5s");
			$(".ebox").show();
		});
	})
	// 바깥 영역 클릭시 에딧창 사라짐
	$(function() {
		var display = $(".ebox").css("display");
		if (display != "none")
			$(".slider-block").click(function() {
				$(".ebox").css("display", "none");
			});
	})
	// x표시
	$(function() {
		$(".x").click(function() {
			$(".ebox").hide();
			$(".slider").css("opacity", "1");
			$("#big").css("opacity", "1");
		});
	})	
	
	// 이미지 업로드
	var registShop= function(){
		var form = $(".registForm")[0];
		var formData = new FormData(form);
			$.ajax({
			   url: contextPath+"/shop/regist.do",
			   processData: false,
			   contentType: false,
			   data: formData,
			   type: 'POST',
			   success: function(data){
					$('.ebox').hide();
			   }
			});
	}
	// 업로드 전 미리보기
 	function readURL1(input) {
		if(input.files&&input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				$(".blah1").attr('src', e.target.result);
				$(".blah1").css('opacity', 1);
				$(".blah1").css('z-index', 99);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}
 	function readURL2(input) {
		if(input.files&&input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				$(".blah2").attr('src', e.target.result);
				$(".blah2").css('opacity', 1);
				$(".blah2").css('z-index', 99);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}
 	function readURL3(input) {
		if(input.files&&input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				$(".blah3").attr('src', e.target.result);
				$(".blah3").css('opacity', 1);
				$(".blah3").css('z-index', 99);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}
 	function readURL4(input) {
		if(input.files&&input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				$(".blah4").attr('src', e.target.result);
				$(".blah4").css('opacity', 1);
				$(".blah4").css('z-index', 99);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}
 	$(function() {
 		$(".blah1").dblclick(function() {
 			$(".blah1").css("z-index", "0");
 		});
 	})
 	$(function() {
 		$(".blah2").dblclick(function() {
 			$(".blah2").css("z-index", "0");
 		});
 	})
 	$(function() {
 		$(".blah3").dblclick(function() {
 			$(".blah3").css("z-index", "0");
 		});
 	})
 	$(function() {
 		$(".blah4").dblclick(function() {
 			$(".blah4").css("z-index", "0");
 		});
 	})
</script>
</body>
</html>
